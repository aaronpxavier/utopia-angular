<mat-sidenav-container class="sidenav">

  <!-- Side Content -->
  <mat-sidenav mode="side" opened>
    <mat-tab-group *ngIf="bookings$ | async as state" mat-align-tabs="center" class="nav-content">
      <mat-tab label="Active Bookings">
  
        <!-- Loading booking data -->
        <div *ngIf="!state.bookings && !state.error" class="center">
          <mat-spinner></mat-spinner>
        </div>
  
        <!-- Error loading bookings -->
        <div *ngIf="state.error && shouldShowError" class="center">
          <mat-card class="error">
            <div mat-card-content>{{ state.error }}</div>
            <div mat-card-actions>
              <button mat-button (click)="shouldShowError = false">Cancel</button>
              <button mat-raised-button mat-button color="primary" (click)="retryBookingRequest()">Retry</button>
            </div>
          </mat-card>
        </div>
  
        <!-- Active Bookings Tab Content -->
        <mat-action-list class="list-container">
          <button mat-list-item *ngFor="let booking of state.bookings" (click)="onBookingClick(booking)" [ngClass]="{
            'selected-booking': booking === selectedBooking
          }" matTooltip="View Details" matTooltipPosition="after">
            <div matLine *ngFor="let flight of booking.flights" fxLayout="row" fxLayoutAlign="start" fxLayoutGap="10%">
              <span>UA-{{ flight.flightDetails.flightNumber }}</span>
              <span>
                {{ flight.flightDetails.departCityId }} to 
                {{ flight.flightDetails.arriveCityId }}
              </span>
              <span>
                {{ flight.departTime | date:'MMM d, hh:mm a' }}
              </span>
            </div>
            <mat-divider></mat-divider>
          </button>
        </mat-action-list>
      </mat-tab>
  
      <!-- Booking History Tab Content -->
      <mat-tab label="Booking History">
      </mat-tab>
  
    </mat-tab-group>
  </mat-sidenav>

  <!-- Booking Details Main View -->
  <mat-sidenav-content>
    <app-booking-details [booking]="selectedBooking" *ngIf="selectedBooking"></app-booking-details>
  </mat-sidenav-content>
</mat-sidenav-container>